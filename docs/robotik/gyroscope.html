<!doctype html>
<html lang="de" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-robotik/gyroscope" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Drehbewegungen eines Roboters mit einem Gyroskop bestimmen | Rule The Bots</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://spacehal.github.io/docs/robotik/gyroscope"><meta data-rh="true" name="docusaurus_locale" content="de"><meta data-rh="true" name="docsearch:language" content="de"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Drehbewegungen eines Roboters mit einem Gyroskop bestimmen | Rule The Bots"><meta data-rh="true" name="description" content="Drehbewegungen eines Roboter und einem Gyroskop bestimmen (Zumo 32U4)"><meta data-rh="true" property="og:description" content="Drehbewegungen eines Roboter und einem Gyroskop bestimmen (Zumo 32U4)"><meta data-rh="true" name="keywords" content="Arduino,Roboter,Robotik,Kinematik,IMU,inertiale Messeinheit,Gyroskop,Drehratensensor,Positionsbestimmung,Winkelgeschwindigkeit,Zumo 32u4,Zumo"><link data-rh="true" rel="icon" href="/img/LogoSmallRed.svg"><link data-rh="true" rel="canonical" href="https://spacehal.github.io/docs/robotik/gyroscope"><link data-rh="true" rel="alternate" href="https://spacehal.github.io/docs/robotik/gyroscope" hreflang="de"><link data-rh="true" rel="alternate" href="https://spacehal.github.io/docs/robotik/gyroscope" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TBHHG3V4Z4-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Rule The Bots" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a4f1c412.css">
<link rel="preload" href="/assets/js/runtime~main.42423a53.js" as="script">
<link rel="preload" href="/assets/js/main.ca89721a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Zum Hauptinhalt springen"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Zum Hauptinhalt springen</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">RuleTheBots</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/arduino/helloworld">Arduino</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/robotik/beginning">Robotik</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zumo32u4/gettingStarted">3pi+/Zumo</a><a class="navbar__item navbar__link" href="/docs/more/links">Links</a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Suche"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Suche</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="ZurÃ¼ck nach oben scrollen" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_ToTc themedImage--dark_i4oU"><b>RuleTheBots</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/arduino">Arduino</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Arduino&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/robotik/beginning">Roboter</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Roboter&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/linienfolger">Linienfolger</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Linienfolger&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/motorencoder">Motorencoder</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Motorencoder&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/category/lokalisierung">Lokalisierung</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Lokalisierung&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/odometrie">Odometrie</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/robotik/gyroscope">Gyroskop</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/objektFinden">Suchen und Ausrichten</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/botBarcode">Barcode Auslesen</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/maze">Labyrinth</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/robotik/gridNavigation">Gitternavigation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/pololu-3pizumo">Pololu 3pi+/Zumo</a><button aria-label="Umschalten der Seitenleiste mit einklappbarer Kategorie &#x27;Pololu 3pi+/Zumo&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Seitenleiste einklappen" aria-label="Seitenleiste einklappen" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/robotik/beginning"><span itemprop="name">Roboter</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/lokalisierung"><span itemprop="name">Lokalisierung</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Gyroskop</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Auf dieser Seite</button></div><div class="theme-doc-markdown markdown"><header><h1>Drehbewegungen eines Roboters mit einem Gyroskop bestimmen</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gyroskop">Gyroskop<a href="#gyroskop" class="hash-link" aria-label="Direkter Link zur Gyroskop" title="Direkter Link zur Gyroskop">â</a></h2><p>Ein Gyroskop, eigentlich Drehratensensor genannt, ist wie ein Beschleunigungssensor Teil einer <a href="/docs/zumo32u4/imu">inertialen Messeinheit</a> (IMU - <em>inertial measurement unit</em>), mit welcher ohne Ã¤uÃere Bezugspunkte <strong>Ãnderungen der Lage und Postion</strong> eines Objektes bestimmt werden. Mit einer inertialen Messeinheit kann daher immer nur die Lage zu einem anfÃ¤nglich bekannten Startpunkt bestimmt werden. Heutzutage finden sich solche Messeinheiten zur Bestimmung der Lage und Position in vielen elektronischen GerÃ¤ten, wie zum Beispiel <a href="https://phyphox.org/de/home-de/" target="_blank" rel="noopener noreferrer">Smartphones</a> oder <a href="https://www.youtube.com/watch?v=UxABxSADZ6U" target="_blank" rel="noopener noreferrer">Gimbals</a> zur Stabilisierung von Kamerabildern.</p><p>WÃ¤hrend <strong>Gyroskope</strong> frÃ¼her ziemlich <a href="https://de.wikipedia.org/wiki/Kreiselinstrument#/media/Datei:Gyroscope_hg.jpg" target="_blank" rel="noopener noreferrer">groÃ</a> und sehr teuer waren, gibt es seit einiger Zeit so genannten <a href="https://www.bosch.com/de/stories/bosch-mems-sensoren-anwendungsbereiche/" target="_blank" rel="noopener noreferrer">mikroelektromechanische Systeme (MEMS)</a>, welche die <a href="https://de.wikipedia.org/wiki/Corioliskraft" target="_blank" rel="noopener noreferrer">Corioliskraft</a> ausnutzen und Gyroskope wesentlich kleiner und preiswerter gemacht haben. Heutzutage werden Sie millionenfach in Form winziger integrierte Schaltung mit einer KantenlÃ¤nge von wenigen Millimetern verwendet.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="drehwinkel-in-der-ebene-bestimmen">Drehwinkel in der Ebene bestimmen<a href="#drehwinkel-in-der-ebene-bestimmen" class="hash-link" aria-label="Direkter Link zur Drehwinkel in der Ebene bestimmen" title="Direkter Link zur Drehwinkel in der Ebene bestimmen">â</a></h2><p>Das vom Zumo 32U4 oder dem 3pi+ 32u4 verwendete Gyroskop kann Drehraten um drei verschieden Achsen (siehe Abbildung) messen. Soll bestimmt werden, ob sich der Roboter auf einer ebenen FlÃ¤che nach links oder rechts dreht (entspricht der xy-Ebene), so kann dafÃ¼r die Drehrate um die z-Achse verwendet werden.</p><img loading="lazy" src="/img/robotik/GyroWinkel.png" alt="Drehwinkel eines Gyroskops" width="330" class="center img_ev3q"><p>Mit einem Gyroskop wird in der Regel die <strong>Drehrate</strong> bzw. die Winkelgeschwindigkeit <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span></span></span></span></span> und nicht die Orientierung oder der Drehwinkel gemessen. Dreht sich das Gyroskop in einer Sekunde einmal um sich selbst, wÃ¼rde eine Winkelgeschwindigkeit von 360 Grad/s gemessen werden.  </p><p>Ãhnlich wie die Integration der Geschwindigkeit die zurÃ¼ckgelegt Strecke ergibt, lÃ¤sst sich auch der Drehwinkel <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">Ï</span></span></span></span></span>  aus der Integration der Winkelgeschwindigkeit <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span></span></span></span></span> Ã¼ber die Zeit <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">t</span></span></span></span></span> bestimmen:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Ï</mi><mo>=</mo><mo>â«</mo><mi>Ï</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mtext>ââ</mtext><mtext>d</mtext><mi>t</mi></mrow><annotation encoding="application/x-tex">\varphi = \int \omega(t)\; \text{d}t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord mathnormal">Ï</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.2222em;vertical-align:-0.8622em"></span><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">â«</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord text"><span class="mord">d</span></span><span class="mord mathnormal">t</span></span></span></span></span></div><p>Der Mikrocontroller kann das Integral, Ã¤hnlich wie bei der <a href="https://www.geogebra.org/m/svkzcuyd" target="_blank" rel="noopener noreferrer">Streifenmethode</a>, als Summe vieler einzelner WinkelÃ¤nderungen <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta \varphi_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> bestimmen.</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msubsup><mo>â«</mo><mn>0</mn><mi>t</mi></msubsup><mi>Ï</mi><mo stretchy="false">(</mo><mi>Ï</mi><mo stretchy="false">)</mo><mtext>ââ</mtext><mi>d</mi><mi>Ï</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><munderover><mo>â</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></munderover><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mi>i</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mn>1</mn></msub><mo>+</mo><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mn>3</mn></msub><mo>+</mo><mo>â¯</mo><mo>+</mo><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mi>n</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi>Ï</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} \int_0^{t} \omega(\tau)\; d{\tau} &amp;= \sum_{i=0}^n \Delta\varphi_i \\ &amp;= \Delta\varphi_1 + \Delta\varphi_2 +\Delta\varphi_3 + \cdots +\Delta\varphi_n \\ &amp;= \varphi(t) \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6.2291em;vertical-align:-2.8645em"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3645em"><span style="top:-5.3645em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"><span class="mop"><span class="mop op-symbol large-op" style="margin-right:0.44445em;position:relative;top:-0.0011em">â«</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5435em"><span style="top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.8129em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.9119em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.1132em">Ï</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.1132em">Ï</span></span></span></span><span style="top:-2.9469em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"></span></span><span style="top:-1.4469em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:2.8645em"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.3645em"><span style="top:-5.3645em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6514em"><span style="top:-1.8723em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em"><span class="pstrut" style="height:3.05em"></span><span><span class="mop op-symbol large-op">â</span></span></span><span style="top:-4.3em;margin-left:0em"><span class="pstrut" style="height:3.05em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-2.9469em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="minner">â¯</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span><span style="top:-1.4469em"><span class="pstrut" style="height:3.6514em"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord mathnormal">Ï</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:2.8645em"><span></span></span></span></span></span></span></span></span></span></span></span></div><p>Die einzelnen WinkelÃ¤nderungen <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta \varphi_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> hÃ¤ngen natÃ¼rlich von der <strong>momentanen</strong> Winkelgeschwindigkeit <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ï</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\omega_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> und dem Zeitintervall <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> ab. Ist das Zeitintervall <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Î</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> klein genug, bzw. Ã¤ndert sich die Winkelgeschwindigkeit in dem Zeitintervall nur sehr wenig, so ergibt sich fÃ¼r die Ãnderung des Drehwinkels:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">Î</mi><msub><mi>Ï</mi><mi>i</mi></msub><mo>â</mo><msub><mi>Ï</mi><mi>i</mi></msub><mi mathvariant="normal">Î</mi><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\Delta\varphi_i \approx \omega_i \Delta t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em"></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">â</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">Ï</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mord">Î</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span></div><p>Diese Multiplikation kann dann sehr einfach mit dem Mikrocontroller realisiert werden:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dWinkel = drehRate * dt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Werden anschlieÃend alle WinkelÃ¤nderungen <code>dWinkel</code> aufaddiert, erhÃ¤lt man die aktuelle Ãnderung des Drehwinkels:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">winkel = winkel + dWinkel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Leider ist die Praxis etwas komplizierter als die Theorie. Zum einen gibt des Gyroskop des Roboters die Winkelgeschwindigkeit nicht in Grad pro Sekunde aus und zum anderen fÃ¼hrt ein reales, verrauschtes Signal der Winkelgeschwindigkeit aufgrund der durchzufÃ¼hrenden Integration schnell zu fehlerhaften Drehwinkeln. Wie mit dem Gyroskop trotzdem ein recht genauer Drehwinkel bestimmt werden kann, wird in dem folgenden Abschnitt erklÃ¤rt.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Achtung</div><div class="admonitionContent_S0QG"><p>Das Gyroskop bestimmt die Drehrate (Winkelgeschwindigkeit) des Roboters, nicht den Drehwinkel.</p></div></div><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <ol><li><p>Folgende Winkelgeschwindigkeiten (Drehgeschwindigkeiten) wurden gemessen: </p><p>  Ï(t) = 180 Grad/s fÃ¼r 0s &lt;= t &lt; 0,5s</p><p>  Ï(t) = 0 Grad/s fÃ¼r 0,5s &lt;= t &lt; 1s</p><p>  Ï(t) = -200 Grad/s fÃ¼r 1s &lt;= t &lt; 1,9s</p><p>  Ï(t) = 0 Grad/s fÃ¼r 1,9s &lt;= t &lt; 2,5s</p><p>  Ï(t) = 150 Grad/s fÃ¼r 2,5s &lt;= t &lt; 3,1s</p><p>  Ï(t) = 0 Grad/s fÃ¼r 3,1s &lt;= t&lt; 4s</p><p>  Ï(t) = 80 Grad/s * (t -4s) fÃ¼r 4s &lt;= t &lt; 7s </p><p>Zeichnen Sie den Verlauf der Winkelgeschwindigkeit  als Liniendiagramm in ein geeignetes Koordinatensystem.</p><p>Bestimmen Sie rechnerisch den aktuellen Drehwinkel und tragen sie diesen in das selbe Koordinatensystem ein. ErgÃ¤nzen sie die entsprechende Achsenbeschriftung.</p></li></ol></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="auslesen-der-drehrate">Auslesen der Drehrate<a href="#auslesen-der-drehrate" class="hash-link" aria-label="Direkter Link zur Auslesen der Drehrate" title="Direkter Link zur Auslesen der Drehrate">â</a></h2><p>Das Gyroskop ist beim Zumo 32U4 Ã¼ber die so genannte <a href="https://de.wikipedia.org/wiki/I%C2%B2C" target="_blank" rel="noopener noreferrer">I2C-Schnittstelle</a> (<em>sprich: I Quadrat C</em>) mit dem Mikrocontroller des Roboters verbunden. Wie bei der seriellen Schnittstelle zur Kommunikation mit dem PC handelt es sich hier um einen seriellen Datenbus, der den bidirektionalen Austausch von Daten ermÃ¶glicht.</p><p>Das folgende Programm initialisiert die I2C-Schnittstelle fÃ¼r die Kommunikation mit dem Gyroskop und lieÃt die aktuelle <strong>Drehrate um die z-Achse</strong> (also in der xy-Ebene) aus.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">3pi+</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Zumo</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Drehrate um die z-Achse des Pololu 3pi+ 32u4 auslesen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Wire.h&gt;</span><span class="token macro property" style="color:#36acaa">                 </span><span class="token macro property comment" style="color:#999988;font-style:italic">// I2C Bibliothek</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Pololu3piPlus32U4.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Pololu3piPlus32U4IMU.h&gt;</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property comment" style="color:#999988;font-style:italic">// IMU Bibliothek</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using namespace Pololu3piPlus32U4</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">IMU imu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                          </span><span class="token comment" style="color:#999988;font-style:italic">// Objekt fÃ¼r Inertialsensoren (inkl. Gyroskop)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">115200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Wire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Starten der I2C Verbindung</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// Inertialsensoren (inkl. Gyroskop) initialisieren</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Grundeinstellungen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">configureForTurnSensing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Empfindlichkeit und Filter einstellen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">writeReg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LSM6DS33_ADDR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LSM6DS33_REG_CTRL3_C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x44</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Bug in der Pololu Bibliothek</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readGyro</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Auslesen der Gyro-Daten</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> drehRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// Drehrate in z-Richtung (xy-Ebene)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">drehRate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Drehrate um die z-Achse des Zumo 32U4 auslesen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Wire.h&gt;</span><span class="token macro property" style="color:#36acaa">                 </span><span class="token macro property comment" style="color:#999988;font-style:italic">// I2C Bibliothek</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Zumo32U4.h&gt;</span><span class="token macro property" style="color:#36acaa">             </span><span class="token macro property comment" style="color:#999988;font-style:italic">// Zumo 32U4 Bibliothek</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zumo32U4IMU imu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// Objekt fÃ¼r Inertialsensoren (inkl. Gyroskop)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">115200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Wire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Starten der I2C Verbindung</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// Inertialsensoren (inkl. Gyroskop) initialisieren</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">configureForTurnSensing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Empfindlichkeit und Filter einstellen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readGyro</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Auslesen der Gyro-Daten</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> drehRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// Drehrate in z-Richtung (xy-Ebene)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Serial</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">drehRate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">delay</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Damit die I2C-Schnittstelle zur Kommunikation mit dem Gyroskop Ã¼berhaupt genutzt werden kann, muss mit</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;Wire.h&gt;</span><span class="token macro property" style="color:#36acaa">                 </span><span class="token macro property comment" style="color:#999988;font-style:italic">// I2C Bibliothek</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>die Wire-Bibliothek fÃ¼r die I2C-Schnittstelle eingebunden werden.
Nachdem das Objekt fÃ¼r die Inertialsensoren (inkl. dem Gyroskop) deklariert wurde</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">3pi+</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Zumo</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">IMU imu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Objekt fÃ¼r Inertialsensoren (inkl. Gyroskop)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Zumo32U4IMU imu</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Objekt fÃ¼r Inertialsensoren (inkl. Gyroskop)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>wird in der <code>setup()</code> Funktion die I2C-Schnittstelle gestartet und anschlieÃend das Gyroskop (als Teil der Inertialsensoren) initialisiert und konfiguriert.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Wire</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">begin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Starten der I2C Verbindung</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                     </span><span class="token comment" style="color:#999988;font-style:italic">// Inertialsensoren (inkl. Gyroskop) initialisieren</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">enableDefault</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Grundeinstellungen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">configureForTurnSensing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Empfindlichkeit und Filter einstellen</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">writeReg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">LSM6DS33_ADDR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> LSM6DS33_REG_CTRL3_C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x44</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Bug in der Pololu Bibliothek</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ist die Konfiguration abgeschlossen, werden mit der Zeile</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readGyro</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// Auslesen der Gyro-Daten</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>die Drehraten des Gyroskops fÃ¼r die 3 Achsen (x,y,z) ausgelesen. Auf die einzelnen Werte kann dann Ã¼ber das Objekt <code>imu</code> mit <code>imu.g.x</code>, <code>imu.g.y</code> und <code>imu.g.z</code> zugegriffen werden:</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> drehRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z       </span><span class="token comment" style="color:#999988;font-style:italic">// Drehrate in z-Richtung (xy-Ebene)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="messen-und-kalibrieren">Messen und Kalibrieren<a href="#messen-und-kalibrieren" class="hash-link" aria-label="Direkter Link zur Messen und Kalibrieren" title="Direkter Link zur Messen und Kalibrieren">â</a></h3><p>Die vom Gyroskop Ã¼bermittelte Drehrate wird als Integer-Datentyp bereitgestellt und soll an dieser Stelle noch ohne Einheit betrachtet werden. (Die Umrechnung in Grad pro Sekunde erfolgt spÃ¤ter). Bei einem  <strong>ruhenden Roboter</strong> (ruhender Sensor) ergibt sich der folgende Verlauf der <strong>Drehrate</strong> (dunkle Linie).</p><div class="chartwrapper"><canvas role="img" height="50" width="100"></canvas></div><p>Idealer Weise sollte fÃ¼r den Fall des ruhenden Roboters die Drehrate, also die Drehgeschwindigkeit immer null sein. Die realen Messwerte sind jedoch verrauscht und variieren daher. AuÃerdem weisen die Messwerte einen Mittelwert auf, der deutlich von null abweicht. Dieser Mittelwert der Drehrate eines ruhenden Sensors wird <strong>Offset-Fehler</strong> genannt.</p><p>Da der Offset-Fehler eine mittlere Drehrate <em>vortÃ¤uscht</em>, die der stehende Roboter nicht haben kann, sollte vor der  Weiterverarbeitung der Drehrate der Offset-Fehler immer bestimmt und anschlieÃend kompensiert werden.</p><p>Am einfachsten lÃ¤sst sich der Offset-Fehler bestimmen, indem Ã¼ber eine feste Anzahl von Messwerten der Mittelwert bestimmt wird.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bestimmen des Offset-Fehlers (in void setup())</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> sumGyro </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">gyroDataReady</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Warten auf neue Gyro-Daten</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">readGyro</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Einlesen der Gyro-Daten</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  sumGyro </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// imu.g.z: Winkelgeschwindigkeit der z-Achse </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> offSet </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sumGyro </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000.0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Offset-Fehler als FlieÃkommazahl berechnen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Der so ermittelte Offsetfehler sollte anschlieÃend von allen andern Messwerten abgezogen werden, damit die ermittelte Drehrate mittelwertfrei ist.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> drehRate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> offSet</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// mittlwertfreier (aber verrauschter) Messwert des Gyroskops</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Der Verlauf der kalibrierten Drehrate ist ebenfalls in dem obigen Abbildung dargestellt (helle Linie).</p><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <ol><li>ErlÃ¤utern Sie, was der <strong>Offset-Fehler</strong> eines Gyroskops ist und warum er bei der Weiterverarbeitung der Messdaten berÃ¼cksichtigt werden muss.</li><li>Wird ein ruhender Roboter von einem Benutzer hochgehoben, Ã¤ndert sich aller Wahrscheinlichkeit nach auch die Orientierung des Roboters. Schreiben Sie ein Programm, dass die OrientierungsÃ¤nderung Ã¼berwacht und eine LED aufleuchten lÃ¤sst, sobald der Roboter seine Orientierung Ã¤ndert. Ist der Roboter wieder in Ruhe, soll die LED wieder ausgehen. </li></ol></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bestimmen-des-drehwinkels">Bestimmen des Drehwinkels<a href="#bestimmen-des-drehwinkels" class="hash-link" aria-label="Direkter Link zur Bestimmen des Drehwinkels" title="Direkter Link zur Bestimmen des Drehwinkels">â</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="umrechnung-der-drehrate-in-grad-pro-sekunde">Umrechnung der Drehrate in Grad pro Sekunde<a href="#umrechnung-der-drehrate-in-grad-pro-sekunde" class="hash-link" aria-label="Direkter Link zur Umrechnung der Drehrate in Grad pro Sekunde" title="Direkter Link zur Umrechnung der Drehrate in Grad pro Sekunde">â</a></h3><p>Die vom Gyroskop gemessene Drehrate wurde bisher ohne Einheit betrachtet. Zum spÃ¤teren Bestimmen des Drehwinkels ist es jedoch sinnvoll, die Drehrate in eine Winkelgeschwindigkeit mit der Einheit <em>Grad pro Sekund (deg/s)</em> umzurechnen. Der notwendige Umrechnungsfaktor hÃ¤ngt dabei von den Einstellungen des Gyroskops ab.</p><p>Die vom Zumo 32U4 verwendeten Gyroskope (es gibt zwei Versionen des Zumo 32U4 mit verschiedenen Gyroskop-ICs) kÃ¶nnen in der Empfindlichkeit und dem Messbereich eingestellt werden. Hierbei gibt der <strong>Messbereich</strong> die maximal messbare Drehrate in Grad pro Sekunde an und die <strong>Empfindlichkeit</strong> gibt die Genauigkeit der Messung an. Je kleiner der Wert der Empfindlichkeit, desto genauer der ermittelte Messwert.</p><p>In der Konfiguration fÃ¼r das Messen von <a href="/docs/zumo32u4/imu#configureforturnsensing">Roboterdrehungen</a></p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">configureForTurnSensing</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Empfindlichkeit und Filter einstellen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>betrÃ¤gt die <strong>Empfindlichkeit des Gyroskops 70 mdps/digit</strong> (Milligrad pro Sekunde / digit). Mit der eingestellten Empfindlichkeit ist es dann mÃ¶glich, die Winkelgeschwindigkeit in Grad pro Sekunde zu bestimmen:</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Bestimmung der Winkelgeschwindigkeit (Drehrate) aus den Messwerten</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// und der eingestellten Empfindlichkeit von 70 mdps/digit = 0.07 dps/digit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float winkelGeschw </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.07</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// in deg/s (GradmaÃ pro Sekunde) mit Offset-Fehler </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Wird der Offset-Fehler berÃ¼cksichtigt, ergibt sich folgende Winkelgeschwindigkeit:</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">float winkelGeschw </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">imu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> offSet</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.07</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ohne Offset-Fehler in deg/s </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="integration-der-drehgeschwindigkeit">Integration der Drehgeschwindigkeit<a href="#integration-der-drehgeschwindigkeit" class="hash-link" aria-label="Direkter Link zur Integration der Drehgeschwindigkeit" title="Direkter Link zur Integration der Drehgeschwindigkeit">â</a></h3><p>Von der <a href="#drehwinkel-in-der-ebene-bestimmen">Theorie</a> her ist bekannt, dass sich der aktuelle Drehwinkel aus der Integration der Drehgeschwindigkeit Ã¼ber die Zeit ergibt. Der Arduino kann die Integration dann als Aufsummierung der Winkelgeschwindigkeit unter BerÃ¼cksichtigung der Zeitintervalle <code>dt</code> bestimmen.</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">winkel = winkel + winkelGeschw * dt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Das <strong>Zeitintervall</strong> <code>dt</code> entspricht der vergangenen Zeit seit der letzten Aktuallisierung des aktuellen Drehwinkels <code>winkel</code> und sollte mÃ¶glichst klein sein. Daher sollte fÃ¼r dessen Bestimmung die <code>micros()</code> Funktion verwendet werden, welche die seit dem Programmstart vergangene Zeit in Mikrosekunden (Âµs) angibt und daher deutlich genauer ist als die <code>millis()</code> Funktion ist.</p><div class="language-arduino codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-arduino codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> now </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">micros</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// Zeit in Mikrosekunden (Âµs)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">long</span><span class="token plain"> dt  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> now </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> gyroLastUpdate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Zeitdifferenz in Mikrosekunden (Âµs) </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gyroLastUpdate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// `gyroLastUpdate` sollte global deklariert sein</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In der folgenden Abbildung ist exemplarisch der gemessene Verlauf der kalibrierten Winkelgeschwindigkeit und des sich daraus ergebenen aktuellen Drehwinkels dargestellt.</p><div class="chartwrapper"><canvas role="img" height="50" width="100"></canvas></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="messfehler">Messfehler<a href="#messfehler" class="hash-link" aria-label="Direkter Link zur Messfehler" title="Direkter Link zur Messfehler">â</a></h2><p>Wird Ã¼ber einen lÃ¤ngeren Zeit der aktuelle Drehwinkel eines <strong>ruhenden</strong> Roboters bestimmt, ist man schnell verwundert, dass - obwohl in Ruhe - sich der ermittelte Drehwinkel des Roboters Ã¤ndert. Je lÃ¤nger gewartet wird, desto schneller scheint sich der aktuelle Drehwinkel zu Ã¤ndern. Die Ursache sind Messfehler, welchen bei jedem Gyroskop auftreten und verschiedene Ursachen haben. Die beiden wichtigsten Fehlerquellen sollen im Folgenden besprochen werden.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="verÃ¤nderlichkeit-des-offset-fehlers-bias-instability">VerÃ¤nderlichkeit des Offset-Fehlers (Bias Instability)<a href="#verÃ¤nderlichkeit-des-offset-fehlers-bias-instability" class="hash-link" aria-label="Direkter Link zur VerÃ¤nderlichkeit des Offset-Fehlers (Bias Instability)" title="Direkter Link zur VerÃ¤nderlichkeit des Offset-Fehlers (Bias Instability)">â</a></h3><p>Jedes Gyroskop erfÃ¤hrt den sogenannten <a href="/docs/robotik/gyroscope#messen-und-kalibrieren">Offset-Fehler</a>, wodurch auch bei einem ruhenden Sensor Messwerte ungleich null gemessen werden. (Die Messwerte tÃ¤uschen also eine Drehung bei einem ruhenden System vor.) Wie bereits weiter oben beschrieben, kann dieser Offset-Fehler durch einfaches Bestimmen des mittleren Offsets korrigiert werden. Problemtisch ist jedoch, dass der Offset- Fehler zeitlich nicht konstant ist. ÃuÃere Effekte wie TemperaturÃ¤nderungen oder ErschÃ¼tterungen verÃ¤ndern den Offsetfehler und fÃ¼hren damit Ã¼ber eine lÃ¤ngere Zeit zu fehlerhaften Messwerten. Eine regelmÃ¤Ãige Neukalibrierung des Sensors kann hier Abhilfe schaffen.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="random-walk">Random Walk<a href="#random-walk" class="hash-link" aria-label="Direkter Link zur Random Walk" title="Direkter Link zur Random Walk">â</a></h3><p>Eine weitere Fehlerquelle bei der Bestimmung des aktuellen Drehwinkels ist der sogenannte <strong>Random Walk</strong> oder auch Irrfahrt. Es beschreibt die Verkettung mehrerer fehlerbehafteter MessgrÃ¶Ãen, wobei diese einem zeitdiskreten stochastischem Prozess mit unabhÃ¤ngigen und identisch verteilten Ãnderungen unterliegen. </p><p>Werden beispielsweise gleichverteilte Zufallszahlen zwischen -5 und 5 aufaddiert, so ergibt sich zum Beispiel die folgende Zahlenfolge:</p><div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Zufallszahlen:        -1  +5   -1   -2   +2   +2   +5   +3   -4   -3   -5   +3  -3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Aufaddierte Werte:    -1   4    3    1    3    5   10   13    9    6    1    4   1    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="In die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Hierbei erscheint es nicht ganz unplausibel zu vermuten, dass der Erwartungswert der aufaddierten Zahlen bei jedem Schritt 0 ist. TatsÃ¤chlich ist der Erwartungswert beim Random Walk immer 0, jedoch wÃ¤chst mit jedem Schritt auch die Abweichung der Werte vom Erwartungswert (die Standardabweichung wÃ¤chst). </p><p>In dem unten abgebildeten Radom Walk Simulator ist gut zu erkennen, dass jeder neue Random Walk (<em>HinzufÃ¼gen neuer Werte durch Mausklick</em>) einen anderen Weg geht und letztlich auch andere, meistens vom Erwartungswert 0 abweichende Werte, aufweist. Werden ganz viele Werte hinzugefÃ¼gt (<em>Starten der Animation mit &#x27;a&#x27;</em>), lÃ¤sst sich die Verteilung des absoluten HÃ¤ufigkeiten als Balkendiagramm darstellen. An dieser Verteilung wird ganz gut ersichtlich, dass je lÃ¤nger der Pfad eines Random Walks ist (also je mehr Messwerte aufaddiert werden), desto grÃ¶Ãer wird auch die Standardabweichung der aufsummierten Werte.</p><div class="iframe-container"><iframe width="100%" height="420" scrolling="no" src="https://spacehal.github.io/randomWalk/randomWalk.html" title="Random Walk"></iframe></div><p>FÃ¼r die <strong>Ermittlung des aktuellen Drehwinkels</strong> mit einem Gyroskop bedeutet dies, dass auch im Fall eines ruhenden Sensors mit der Zeit aus der Summe der Drehraten Drehwinkel berechnet werden, die vom Erwartungswert 0 abweichen. Es wird also immer wahrscheinlicher, dass bei langen Messreihen der ermittelte Drehwinkel von dem eigentlichen Drehwinkel abweichen wird.</p><p>Random Walk spielt auÃer beim Gyroskop auch in vielen andern Kontexten, wie zum Beispiel der Finanzmarktanalyse oder der Analyse von zufÃ¤lligen Bewegungen von Teilchen in der Physik, ein groÃe Rolle.</p><details class="details_lb9f alert alert--info details_b_Ee ueben" data-collapsed="true"><summary>Aufgaben</summary><div><div class="collapsibleContent_i85q"> <ol><li><p>Welche Annahmen bzw. NÃ¤herungen werden gemacht, damit der Arduino aus der momentanen Winkelgeschwindigkeit des Gyroskops den Drehwinkel bestimmen kann?</p></li><li><p>Analysieren Sie den Verlauf der Winkelschwindigkeit und des resultierenden aktuellen Drehwinkels in obiger Abbildung. Beschreiben Sie detailliert, welche Drehbewegungen der Roboter erfÃ¤hrt und in welcher Ausrichtung er sich jeweils befindet.</p></li><li><p>Schreiben Sie ein Programm, welches das Gyroskop auf Tastendruck automatisch <strong>kalibriert</strong> und kontinuierlich den <strong>aktuellen Drehwinkel</strong> des Roboters auf dem <strong>Display ausgibt</strong>. Implementieren Sie hierfÃ¼r die Funktion <code>kalibrierenGyro()</code> zum bestimmen des Offset-Fehlers und die Funktion  <code>updateWinkel()</code>, welche bei jedem Aufruf den Drehwinkel aktualisiert. </p><p>WÃ¤hrend der aktuelle Winkel nur ca. all 200 ms auf dem Display ausgegeben werden sollte, muss <code>updateWinkel()</code> sooft wie mÃ¶glich aufgerufen werden.</p></li><li><p>Lassen Sie den Roboter <strong>mit Hilfe des Gyroskops auf der Stelle drehen</strong>. Implementieren Sie hierfÃ¼r eine Funktion <code>drehenGyro(int pGrad)</code>, welche den Roboter um die angegebene Gradzahl (auch negative Winkel) drehen lÃ¤sst.</p><p>Testen Sie die Funktion, indem Sie den Roboter um +180 Grad und anschlieÃend -180 Grad drehen lassen.</p></li><li><p>Lassen Sie den Roboter ein mÃ¶glichst exaktes Quadrat mit einer KantenlÃ¤nge von 20 cm fahren. Nutzen Sie sowohl die Motorencoder als auch das Gyroskop.</p></li><li><p>Schreibe ein Programm, das dafÃ¼r sorgt, dass der Roboter immer in der gleichen Ausrichtung bleibt, egal wie die OberflÃ¤che - zum Beispiel ein Buch, auf dem er steht - sich dreht.</p></li></ol></div></div></details><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="links">Links<a href="#links" class="hash-link" aria-label="Direkter Link zur Links" title="Direkter Link zur Links">â</a></h2><ul><li><a href="https://homepage.univie.ac.at/franz.embacher/Lehre/aussermathAnw2012/RandomWalk.pdf" target="_blank" rel="noopener noreferrer">Random Walk in einer Dimension - AuÃermathematische Anwendungen im Mathematikunterricht</a></li><li><a href="http://e.sci.osaka-cu.ac.jp/yoshino/download/rw/" target="_blank" rel="noopener noreferrer">Random Walk Simulator</a></li><li><a href="https://www.youtube.com/watch?v=GeyDf4ooPdo" target="_blank" rel="noopener noreferrer">Anti Gravity Wheel?</a></li><li><a href="https://www.youtube.com/watch?v=XHGKIzCcVa0" target="_blank" rel="noopener noreferrer">Spinnning: Gyroscope and Coriolis Effect</a></li><li><a href="https://www.youtube.com/watch?v=6_yhOORMpc8" target="_blank" rel="noopener noreferrer">Bosch Funktionsprinzip eines Drehratensensors fÃ¼r ESP</a></li><li><a href="https://www.youtube.com/watch?v=zR8TlL22z-I" target="_blank" rel="noopener noreferrer">Teardown of a Piezoelectric Vibrating Gyroscope</a></li><li><a href="https://www.youtube.com/watch?v=eqZgxR6eRjo" target="_blank" rel="noopener noreferrer">How MEMS Accelerometer Gyroscope Magnetometer Work &amp; Arduino Tutorial</a></li><li><a href="https://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-696.pdf" target="_blank" rel="noopener noreferrer">An introduction to inertial navigation</a></li><li><a href="https://www.pololu.com/file/0J731/L3GD20H.pdf" target="_blank" rel="noopener noreferrer">Datenblatt L3GD20H Sensor</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Dokumentation Seiten"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/robotik/odometrie"><div class="pagination-nav__sublabel">ZurÃ¼ck</div><div class="pagination-nav__label">Odometrie</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/robotik/objektFinden"><div class="pagination-nav__sublabel">Weiter</div><div class="pagination-nav__label">Suchen und Ausrichten</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#gyroskop" class="table-of-contents__link toc-highlight">Gyroskop</a></li><li><a href="#drehwinkel-in-der-ebene-bestimmen" class="table-of-contents__link toc-highlight">Drehwinkel in der Ebene bestimmen</a></li><li><a href="#auslesen-der-drehrate" class="table-of-contents__link toc-highlight">Auslesen der Drehrate</a><ul><li><a href="#messen-und-kalibrieren" class="table-of-contents__link toc-highlight">Messen und Kalibrieren</a></li></ul></li><li><a href="#bestimmen-des-drehwinkels" class="table-of-contents__link toc-highlight">Bestimmen des Drehwinkels</a><ul><li><a href="#umrechnung-der-drehrate-in-grad-pro-sekunde" class="table-of-contents__link toc-highlight">Umrechnung der Drehrate in Grad pro Sekunde</a></li><li><a href="#integration-der-drehgeschwindigkeit" class="table-of-contents__link toc-highlight">Integration der Drehgeschwindigkeit</a></li></ul></li><li><a href="#messfehler" class="table-of-contents__link toc-highlight">Messfehler</a><ul><li><a href="#verÃ¤nderlichkeit-des-offset-fehlers-bias-instability" class="table-of-contents__link toc-highlight">VerÃ¤nderlichkeit des Offset-Fehlers (Bias Instability)</a></li><li><a href="#random-walk" class="table-of-contents__link toc-highlight">Random Walk</a></li></ul></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/SpaceHal/spacehal.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Schule</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.osztiem.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">OSZTIEM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.arduino.cc/reference/de/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Arduino<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/impressum">Impressum</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Stefan Warm. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.42423a53.js"></script>
<script src="/assets/js/main.ca89721a.js"></script>
</body>
</html>