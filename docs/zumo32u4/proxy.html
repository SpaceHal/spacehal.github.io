<!doctype html>
<html class="docs-version-current" lang="de" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="Rule The Bots" href="/opensearch.xml">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">Die Näherungssensoren | Rule The Bots</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://spacehal.github.io/docs/zumo32u4/proxy"><meta data-react-helmet="true" name="docsearch:language" content="de"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Die Näherungssensoren | Rule The Bots"><meta data-react-helmet="true" name="description" content="Pololu Zumo 32u4 Library: Näherungssensoren"><meta data-react-helmet="true" property="og:description" content="Pololu Zumo 32u4 Library: Näherungssensoren"><link data-react-helmet="true" rel="icon" href="/img/LogoSmallRed.svg"><link data-react-helmet="true" rel="canonical" href="https://spacehal.github.io/docs/zumo32u4/proxy"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io/docs/zumo32u4/proxy" hreflang="de"><link data-react-helmet="true" rel="alternate" href="https://spacehal.github.io/docs/zumo32u4/proxy" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.ef7832cb.css">
<link rel="preload" href="/assets/js/runtime~main.cae20d6e.js" as="script">
<link rel="preload" href="/assets/js/main.25d60761.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Zum Hauptinhalt springen</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">RuleTheBots</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/arduino/helloworld">Arduino</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/robotik/beginning">Robotik</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/zumo32u4/gettingStarted">Zumo32u4</a><a class="navbar__item navbar__link" href="/docs/more/links">Links</a><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Suche"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Suche</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Zurück nach oben scrollen" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/LogoSmallRed.svg" alt="Rule the Bots" class="themedImage_1VuW themedImage--dark_hz6m"><b>RuleTheBots</b></a><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docs/zumo32u4/installation">Zumo32U4</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/gettingStarted">Erste Schritte</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" tabindex="0" href="/docs/zumo32u4/zumoBasics">Befehlsreferenz</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/zumoBasics">LEDs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/power">Batteriespannung</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/buttons">Taster</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/motors">Motoren</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/display">LCD-Display</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/lineSensor">Liniensensoren</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/zumo32u4/proxy">Näherungssensoren</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/encode">Radencoder</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/zumo32u4/gyroscope">Inertiale Messeinheit</a></li></ul></li></ul></li></ul></nav><button type="button" title="Seitenleiste einklappen" aria-label="Seitenleiste einklappen" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">Auf dieser Seite</button></div><div class="theme-doc-markdown markdown"><header><h1>Die Näherungssensoren</h1></header><p><em>Pololu Zumo 32u4 Library: <a href="https://pololu.github.io/zumo-32u4-arduino-library/class_zumo32_u4_proximity_sensors.html" target="_blank" rel="noopener noreferrer">Näherungssensoren</a></em></p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="einführung">Einführung<a class="hash-link" href="#einführung" title="Direkter Link zur Überschrift">​</a></h2><p>Der Zumo32u4 hat drei <strong>IR-Näherungssensoren</strong> mit welchem nahe Objekte oder Hindernisse erkannt werden können. </p><img src="/img/zumo32u4/ZumoProxyBottom.jpg" alt="Näherungssensoren des Zumo" width="550px" class="center"><p>Die Näherungssensoren  geben an, ob (reflektiertes) IR-Licht detektiert wurde oder nicht.  Im Gegensatz zu den Liniensensoren habe die drei Näherungssensoren keinen integrierten IR-Sender. Stattdessen erfassen sie reflektiertes IR-Licht, das von 4 IR-LEDs auf dem Zumo 32U4 Mainboard (auf der Oberseite des Roboters) ausgesendet wird. </p><p>Damit die Sensoren nicht irrtümlich IR-Licht detektieren, welches von fremden Quellen (z.B. dem Tageslicht oder einer Lampe) kommt, wird das IR-Licht mit einer Frequenz von ca. 38 kHz moduliert. Die drei an der Bodenplatine befindlichen IR-Empfänger (also die Näherungssensoren), können nur dieses modulierte Licht erkennen und sind damit relativ unempfindlich gegenüber anderen Störquellen.</p><p>Die Näherungssensoren sind nach den Richtungen benannt, in die sie zeigen: links, vorne oder rechts. Auf der Platine sind sie mit LFT, FRONT und RGT gekennzeichnet. Das für die Näherungssensoren verwendete Bauteil ist das <a href="https://www.pololu.com/file/0J615/tssp77038.pdf" target="_blank" rel="noopener noreferrer">Vishay TSSP77038 IR-Empfängermodul</a>. </p><p>IR-Näherungssensoren können auch verwendet werden, um Befehle von herkömmlichen <strong>IR-Fernbedienungen</strong> zu empfangen. </p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="ir-leds-für-die-objekterkennung">IR-LEDs für die Objekterkennung<a class="hash-link" href="#ir-leds-für-die-objekterkennung" title="Direkter Link zur Überschrift">​</a></h3><p>Auf dem Zumo32u4 Mainboard befinden sich auch 4 IR-LEDs, welche benötigt werden, um zusammen mit den 3 IR-Näherungssensoren nahe Objekte erkennen zu können:</p><ul><li>Zwei IR-LEDs (FRONT_LEFT und FRONT_RIGHT) befinden sich an der Vorderseite und sind geeignet Objekt vor dem Roboter zu detektieren.</li><li>Zwei seitliche IR-LEDs sind links und rechts (MIDDLE_LEFT und MIDDLE_RIGHT) an der Hauptplatine angebracht und strahlen IR-Licht zur Seite ab.</li></ul><p>Zum Detektieren möglicher Objekte werden in der Klasse <code>Zumo32U4ProximitySensors</code> verschiedene Methoden bereitgestellt, die für die einzelnen IR-Sensoren das reflektierte Licht der unterschiedlichen IR-LEDs bestimmen. </p><img src="/img/zumo32u4/ZumoIRLED.jpg" alt="IR-LED Zumo" width="550px" class="center"><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="das-messprinzip">Das Messprinzip<a class="hash-link" href="#das-messprinzip" title="Direkter Link zur Überschrift">​</a></h3><p>Die drei IR-Näherungssensoren sind digitale Sensoren, welche nur zwei Zustände annehmen können: Entweder IR-Licht wurde detektiert oder kein IR-Licht wurde detektiert. Information über die Intensität des detektierten Lichtes können die Sensoren nicht liefern.</p><p>Um trotzdem zu ermitteln, wieviel IR-Licht ein Objekt reflektiert, kann die Helligkeit der IR-LEDs variiert werden und dadurch bestimmt werden, ab welcher Helligkeit der IR-Sensor reflektiertes IR-Licht detektiert. In der praktischen Anwendung werden zum Beispiel 10 Messungen mit 10 verschieden Helligkeiten der IR-LEDs durchgeführt, um dann zu bestimmen, bei welcher Helligkeit der IR-Sensor aktiviert wird. Die Helligkeit der IR-LEDs wird hierbei über ein PWM-Signal gesteuert.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="eigenschaften-der-objekterkennung">Eigenschaften der Objekterkennung<a class="hash-link" href="#eigenschaften-der-objekterkennung" title="Direkter Link zur Überschrift">​</a></h3><p>Die verwendeten Sensoren sind nicht gedacht für die Entfernungsbestimmung von Objekten. Wie stark das abgestrahlte Infrarotlicht von einem Objekt reflektiert wird, hängt von verschiedenen Faktoren wie Farbe, Oberflächenbeschaffenheit oder Ausrichtung des Objektes ab. Daher ist es nicht möglich, alleine aus der Information über die Intensität des reflektierten Lichtes die Entfernung eines Objektes zu bestimmen. Hierfür wären <a href="https://www.sparkfun.com/distance_sensor_comparison_guide" target="_blank" rel="noopener noreferrer">anderen Sensoren</a> notwendig.</p><p>Beschränkt man sich jedoch auf ein Objekt, dessen Reflexionseigenschaften bekannt sind (z.B. einen Becher), so ist es möglich aus der Intensität des reflektierten Lichtes die Entfernung des Objektes näherungsweise zu bestimmen.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="linien--und-näherungssensoren">Linien- und Näherungssensoren<a class="hash-link" href="#linien--und-näherungssensoren" title="Direkter Link zur Überschrift">​</a></h3><p>Leider hat der vom Zumo32u4 verwendete Mikrocontroller nicht genug freie Ein-/Ausgabe-Pins, damit alle 5 Bodensensoren und alle 3 Näherungssensoren zur selben Zeit betrieben werden können. Insgesamt können nie mehr als 6 Sensoren zur gleichen Zeit verwendet werden (3 Linien- und 3 Näherungssensoren, 4 Linien- und 2 Näherungssensoren, 5 Linien- und 1 Näherungssensor). Je nachdem welche Sensoren verwendet werden sollen, müssen an der Platine für die Bodensensoren Jumper-Stecker neu gesetzt werden.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="messen">Messen<a class="hash-link" href="#messen" title="Direkter Link zur Überschrift">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="void-read"><code>void read()</code><a class="hash-link" href="#void-read" title="Direkter Link zur Überschrift">​</a></h3><p>Die Hauptmethode der Klasse, welche die IR-LEDs ansteuert und die Intensität des reflektierten IR-Licht misst. Fast alle andern Methoden der Klasse dienen dazu, das Verhalten dieser Methode zu konfigurieren oder auf die Messergebnisse dieser Methode zugreifen zu können. </p><p>Die Methode <code>void read()</code> führt folgende Aktionen aus:</p><ol><li>Näherungssensoren aktivieren.</li><li>Liniensensoren IR LEDs deaktivieren.</li><li>Für jeden festgelegten <strong>Helligkeitswert</strong> der LEDs werden folgende Aktionen ausgeführt:<ol><li>Startet IR-Pulse mit den beiden IR-LEDs auf der <em>linken</em> Seite.</li><li>Wertet jeden IR-Sensor aus.</li><li>Schaltet die LED-Pulse aus.</li><li>Startet IR-Pulse mit den beiden IR-LEDs auf der <em>rechten</em> Seite.</li><li>Wertet jeden IR-Sensor aus.</li><li>Schaltet die LED-Pulse aus.</li></ol></li></ol><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Die Methode  <code>read()</code> hat keinen Rückgabewert. Zum Auslesen der Messwerte werden daher verschieden Methoden bereitgestellt (Abschnitt <a href="#auslesen"><em>Auslesen</em></a>).</p></div></div><p>Die <strong>Helligkeitswerte</strong> der IR-LEDs können mit der Methode <a href="/docs/zumo32u4/proxy#void-setbrightnesslevels"><code>setBrightnessLevels()</code></a> festgelegt werden. Die Frequenz der IR Pulse, welche standardmäßig 38 kHz beträgt, kann mit <code>void setPeriod()</code> geändert werden (ändert auch die Empfindlichkeit des IR-Sensors).</p><p>Mit den Standardeinstellung benötigt die Methode etwa 2,15 Millisekunden pro Helligkeitswert plus 0,62 Millisekunden. Die Anzahl der verwendeten Sensoren hat nur einen geringen Einfluss auf die benötigte Zeit.</p><p>Nach der Methode <code>read()</code> sollte zum Auswerten der Ergebnisse eine der <a href="#auslesen">Auslesemethoden</a> aufgerufen werden.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="konfigurieren">Konfigurieren<a class="hash-link" href="#konfigurieren" title="Direkter Link zur Überschrift">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="zumo32u4proximitysensors"><code>Zumo32U4ProximitySensors()</code><a class="hash-link" href="#zumo32u4proximitysensors" title="Direkter Link zur Überschrift">​</a></h3><p>Konstruktor der <code>Zumo32U4ProximitySensors</code> Klasse. </p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="void-initfrontsensor"><code>void initFrontSensor()</code><a class="hash-link" href="#void-initfrontsensor" title="Direkter Link zur Überschrift">​</a></h3><p>Konfiguriert das vorher erzeugte Objekt für die Verwendung des Frontsensors.</p><div class="codeBlockContainer_K1bP language-arduino theme-code-block"><div class="codeBlockContent_hGly arduino"><pre tabindex="0" class="prism-code language-arduino codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#inlcude &lt;Zumo32U4.h&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Zumo32U4ProximitySensors proxSensor;  // Objekt erzeugen</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">proxSensor.initFrontSensor();         // Initialisieren des Frontsensors</span><br></span></code></pre><button type="button" aria-label="In die Zwischenablage kopieren" class="copyButton_Ue-o clean-btn">Kopieren</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="void-initthreesensors"><code>void initThreeSensors()</code><a class="hash-link" href="#void-initthreesensors" title="Direkter Link zur Überschrift">​</a></h3><p>Konfiguriert das vorher erzeugte Objekt für die Verwendung von allen drei Näherungssensoren. Die korrekte Jumpereinstellungen an der Platine für die Liniensensoren ist zu beachten.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="void-setbrightnesslevels"><code>void setBrightnessLevels(...)</code><a class="hash-link" href="#void-setbrightnesslevels" title="Direkter Link zur Überschrift">​</a></h3><p><code>void setBrightnessLevels (uint16_t *levels, uint8_t levelCount)</code></p><p>Legt eine Reihe von Helligkeitswerten für die IR-LED fest, welche von der Methode <code>read()</code> verwendet wird. Wird die Methode <code>setBrightnessLevels</code> nicht genutzt, so werden für die IR-LEDs die Standardwerte 4, 15, 32, 55, 85 und 120 verwendet. Sinnvolle Werte liegen zwischen 1 und 128.</p><p>Parameter</p><ul><li><code>levels</code> Pointer zu einem Array mit Helligkeitswerten</li><li><code>levelCount</code> Anzahl der Helligkeitswerte</li></ul><div class="codeBlockContainer_K1bP language-arduino theme-code-block"><div class="codeBlockContent_hGly arduino"><pre tabindex="0" class="prism-code language-arduino codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#inlcude &lt;Zumo32U4.h&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Zumo32U4ProximitySensors proxSensors;                       // Objekt erzeugen</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">uint16_t levels[] = {2, 4, 8, 16, 32, 64, 128};             // Array für Helligkeitswerte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">proxSensors.setBrightnessLevels(levels, sizeof(levels));    // Helligkeitswerte festlegen</span><br></span></code></pre><button type="button" aria-label="In die Zwischenablage kopieren" class="copyButton_Ue-o clean-btn">Kopieren</button></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="void-setperiod"><code>void setPeriod()</code><a class="hash-link" href="#void-setperiod" title="Direkter Link zur Überschrift">​</a></h3><p><code>void setPeriod (uint16_t period)</code></p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="auslesen">Auslesen<a class="hash-link" href="#auslesen" title="Direkter Link zur Überschrift">​</a></h2><p>Für das Auswerten der mit <a href="/docs/zumo32u4/proxy#void-read"><code>read()</code></a> durchgeführten Messung gibt es verschieden Methoden, welche sich in der Kombination von IR Sensor und IR LED unterscheiden. </p><img src="/img/zumo32u4/zumoProxyTop.png" alt="IR-LED Zumo" width="450px"><p>Für jeden IR Sensor (<em>Left, Front, Right</em>) stehen zwei Methoden zur Verfügung. Die Methoden geben an, bei wie vielen Helligkeitswerten der linken (<em>Left LEDs</em>) oder rechten LED (<em>Right LEDs</em>) der IR Sensor Licht detektiert hat.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsleftwithleftleds"><code>uint8_t countsLeftWithLeftLeds()</code><a class="hash-link" href="#uint8_t-countsleftwithleftleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der linken LED zurück, bei denen der linke Näherungssensor aktiviert wurde.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsleftwithrightleds"><code>uint8_t countsLeftWithRightLeds()</code><a class="hash-link" href="#uint8_t-countsleftwithrightleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der rechten LED zurück, bei denen der linke Näherungssensor aktiviert wurde.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsrightwithleftleds"><code>uint8_t countsRightWithLeftLeds()</code><a class="hash-link" href="#uint8_t-countsrightwithleftleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der linken LED zurück, bei denen der rechte Näherungssensor aktiviert wurde.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsrightwithrightleds"><code>uint8_t countsRightWithRightLeds()</code><a class="hash-link" href="#uint8_t-countsrightwithrightleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der rechten LED zurück, bei denen der rechte Näherungssensor aktiviert wurde.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsfrontwithleftleds"><code>uint8_t countsFrontWithLeftLeds()</code><a class="hash-link" href="#uint8_t-countsfrontwithleftleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der linken LED zurück, bei denen der mittlere Näherungssensor aktiviert wurde.</p><h3 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="uint8_t-countsfrontwithredleds"><code>uint8_t countsFrontWithRedLeds()</code><a class="hash-link" href="#uint8_t-countsfrontwithredleds" title="Direkter Link zur Überschrift">​</a></h3><p>Gibt die <strong>Anzahl</strong> der Helligkeitswerte der rechten LED zurück, bei denen der mittlere Näherungssensor aktiviert wurde.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="beispielprogramm">Beispielprogramm<a class="hash-link" href="#beispielprogramm" title="Direkter Link zur Überschrift">​</a></h2><div class="codeBlockContainer_K1bP language-arduino theme-code-block"><div class="codeBlockContent_hGly arduino"><pre tabindex="0" class="prism-code language-arduino codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/* Einfaches Beispielprogramm, bei dem die Messewerte des Front-IR-Sensors ausgegeben</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    werden. Wird ein Objekt erkannt, so wird dies auf dem LCD-Display angezeigt. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#include &lt;Zumo32U4.h&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Zumo32U4LCD lcd;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Zumo32U4ProximitySensors proxSensors;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">int sensorThreshold = 4;    // Schwellwert für die Objekterkennung</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void setup()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Initialisierung des vorderen IR Sensors. In dieser Konfiguration </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // werden die beiden seitlichen IR Sensoren nicht verwendet.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  proxSensors.initFrontSensor();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Die Werte des level[] Arrays geben die Intensitäten der IR LEDs an. Je höher der Wert,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // desto wahrscheinlicher, dass ein Objekt das Licht reflektiert und der IR Sensor es detektiert.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int levels[] = { 2, 3, 4, 6, 9, 14, 25, 40, 70};</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  proxSensors.setBrightnessLevels(levels, sizeof(levels));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lcd.clear();              // Display löschen</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void loop()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  proxSensors.read();  // Wertet den vorderen IR Sensor mit den IR-LEDs links und rechts aus.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Anzahl der Werte, bei denen der IR Sensor Licht detektiert hat.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int leftValue = proxSensors.countsFrontWithLeftLeds();    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int rightValue = proxSensors.countsFrontWithRightLeds();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Bestimmen, ob ein Objekt erkannt wurde (|| - ODER)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  bool objectSeen = leftValue &gt;= sensorThreshold || rightValue &gt;= sensorThreshold;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (objectSeen){  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ledRed(1);              // Objekt wurde erkannt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  else{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ledRed(0);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lcd.gotoXY(0, 0);         // Ausgabe auf dem LCD-Display</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lcd.print(leftValue);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lcd.print(&#x27; &#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lcd.print(rightValue);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="In die Zwischenablage kopieren" class="copyButton_Ue-o clean-btn">Kopieren</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Letztes Update<!-- --> am <b><time datetime="2022-01-02T10:28:53.000Z">2.1.2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Dokumentation Seiten Navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/zumo32u4/lineSensor"><div class="pagination-nav__sublabel">Zurück</div><div class="pagination-nav__label">Liniensensoren</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/zumo32u4/encode"><div class="pagination-nav__sublabel">Weiter</div><div class="pagination-nav__label">Radencoder</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#einführung" class="table-of-contents__link toc-highlight">Einführung</a><ul><li><a href="#ir-leds-für-die-objekterkennung" class="table-of-contents__link toc-highlight">IR-LEDs für die Objekterkennung</a></li><li><a href="#das-messprinzip" class="table-of-contents__link toc-highlight">Das Messprinzip</a></li><li><a href="#eigenschaften-der-objekterkennung" class="table-of-contents__link toc-highlight">Eigenschaften der Objekterkennung</a></li><li><a href="#linien--und-näherungssensoren" class="table-of-contents__link toc-highlight">Linien- und Näherungssensoren</a></li></ul></li><li><a href="#messen" class="table-of-contents__link toc-highlight">Messen</a><ul><li><a href="#void-read" class="table-of-contents__link toc-highlight"><code>void read()</code></a></li></ul></li><li><a href="#konfigurieren" class="table-of-contents__link toc-highlight">Konfigurieren</a><ul><li><a href="#zumo32u4proximitysensors" class="table-of-contents__link toc-highlight"><code>Zumo32U4ProximitySensors()</code></a></li><li><a href="#void-initfrontsensor" class="table-of-contents__link toc-highlight"><code>void initFrontSensor()</code></a></li><li><a href="#void-initthreesensors" class="table-of-contents__link toc-highlight"><code>void initThreeSensors()</code></a></li><li><a href="#void-setbrightnesslevels" class="table-of-contents__link toc-highlight"><code>void setBrightnessLevels(...)</code></a></li><li><a href="#void-setperiod" class="table-of-contents__link toc-highlight"><code>void setPeriod()</code></a></li></ul></li><li><a href="#auslesen" class="table-of-contents__link toc-highlight">Auslesen</a><ul><li><a href="#uint8_t-countsleftwithleftleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsLeftWithLeftLeds()</code></a></li><li><a href="#uint8_t-countsleftwithrightleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsLeftWithRightLeds()</code></a></li><li><a href="#uint8_t-countsrightwithleftleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsRightWithLeftLeds()</code></a></li><li><a href="#uint8_t-countsrightwithrightleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsRightWithRightLeds()</code></a></li><li><a href="#uint8_t-countsfrontwithleftleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsFrontWithLeftLeds()</code></a></li><li><a href="#uint8_t-countsfrontwithredleds" class="table-of-contents__link toc-highlight"><code>uint8_t countsFrontWithRedLeds()</code></a></li></ul></li><li><a href="#beispielprogramm" class="table-of-contents__link toc-highlight">Beispielprogramm</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/SpaceHal/spacehal.github.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Schule</div><ul class="footer__items"><li class="footer__item"><a href="https://www.osztiem.de/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>OSZTIEM<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.arduino.cc/reference/de/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Arduino<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/impressum">Impressum</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Stefan Warm. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cae20d6e.js"></script>
<script src="/assets/js/main.25d60761.js"></script>
</body>
</html>